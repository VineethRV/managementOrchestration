{"frontend/index.html": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Scientific Calculator</title>\n    <link rel=\"stylesheet\" href=\"styles.css\">\n</head>\n<body>\n    <div class=\"calculator\">\n        <input type=\"text\" id=\"display\" class=\"display\" disabled>\n        <div class=\"buttons\">\n            <button class=\"operator\" data-operator=\"+\">+</button>\n            <button class=\"operator\" data-operator=\"-\">-</button>\n            <button class=\"operator\" data-operator=\"*\">*</button>\n            <button class=\"operator\" data-operator=\"/\">/</button>\n            <button class=\"clear\" data-clear=\"true\">C</button>\n            <button class=\"number\" data-number=\"7\">7</button>\n            <button class=\"number\" data-number=\"8\">8</button>\n            <button class=\"number\" data-number=\"9\">9</button>\n            <button class=\"number\" data-number=\"4\">4</button>\n            <button class=\"number\" data-number=\"5\">5</button>\n            <button class=\"number\" data-number=\"6\">6</button>\n            <button class=\"number\" data-number=\"1\">1</button>\n            <button class=\"number\" data-number=\"2\">2</button>\n            <button class=\"number\" data-number=\"3\">3</button>\n            <button class=\"number\" data-number=\"0\">0</button>\n            <button class=\"decimal\" data-decimal=\".\">.</button>\n            <button class=\"equals\" data-equals=\"true\">=</button>\n        </div>\n    </div>\n\n    <script src=\"script.js\"></script>\n</body>\n</html>",
  "frontend/styles.css": "body {\n    font-family: Arial, sans-serif;\n    background-color: #f0f0f0;\n}\n\n.calculator {\n    width: 300px;\n    margin: 50px auto;\n    background-color: #fff;\n    padding: 20px;\n    border: 1px solid #ddd;\n    border-radius: 10px;\n    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);\n}\n\n.display {\n    width: 100%;\n    height: 40px;\n    padding: 10px;\n    font-size: 24px;\n    text-align: right;\n    border: none;\n    border-radius: 10px;\n    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);\n}\n\n.buttons {\n    display: grid;\n    grid-template-columns: repeat(4, 1fr);\n    grid-gap: 10px;\n    margin-top: 20px;\n}\n\nbutton {\n    width: 100%;\n    height: 40px;\n    padding: 10px;\n    font-size: 18px;\n    border: none;\n    border-radius: 10px;\n    background-color: #f0f0f0;\n    cursor: pointer;\n}\n\nbutton:hover {\n    background-color: #ddd;\n}\n\n.operator {\n    background-color: #ff9900;\n}\n\n.operator:hover {\n    background-color: #ffcc00;\n}\n\n.clear {\n    background-color: #ff0000;\n}\n\n.clear:hover {\n    background-color: #ff3333;\n}\n\n.equals {\n    background-color: #00ff00;\n}\n\n.equals:hover {\n    background-color: #33cc33;\n}\n",
  "backend/script.js": "const display = document.getElementById('display');\nconst buttons = document.querySelectorAll('.buttons button');\n\nlet currentNumber = '';\nlet previousNumber = '';\nlet operator = '';\n\nbuttons.forEach(button => {\n    button.addEventListener('click', () => {\n        const value = button.dataset;\n        if (value.number) {\n            currentNumber += value.number;\n            display.value = currentNumber;\n        } else if (value.operator) {\n            previousNumber = currentNumber;\n            currentNumber = '';\n            operator = value.operator;\n            display.value = previousNumber + ' ' + operator;\n        } else if (value.equals) {\n            if (operator === '+') {\n                display.value = parseFloat(previousNumber) + parseFloat(currentNumber);\n            } else if (operator === '-') {\n                display.value = parseFloat(previousNumber) - parseFloat(currentNumber);\n            } else if (operator === '*') {\n                display.value = parseFloat(previousNumber) * parseFloat(currentNumber);\n            } else if (operator === '/') {\n                display.value = parseFloat(previousNumber) / parseFloat(currentNumber);\n            }\n            currentNumber = display.value;\n            previousNumber = '';\n            operator = '';\n        } else if (value.clear) {\n            currentNumber = '';\n            display.value = '';\n        }\n    });\n});",
  "backend/calculator.py": "from dataclasses import dataclass\nfrom enum import Enum\nfrom typing import Dict, List\n\nclass Operation(Enum):\n    ADD = 1\n    SUBTRACT = 2\n    MULTIPLY = 3\n    DIVIDE = 4\n\n@dataclass\nclass CalculatorRequest:\n    operation: Operation\n    num1: float\n    num2: float\n\n@dataclass\nclass CalculatorResponse:\n    result: float\n    message: str\n\nclass CalculatorService:\n    def calculate(self, request: CalculatorRequest) -> CalculatorResponse:\n        if request.operation == Operation.ADD:\n            return CalculatorResponse(request.num1 + request.num2, \"Result of addition\")\n        elif request.operation == Operation.SUBTRACT:\n            return CalculatorResponse(request.num1 - request.num2, \"Result of subtraction\")\n        elif request.operation == Operation.MULTIPLY:\n            return CalculatorResponse(request.num1 * request.num2, \"Result of multiplication\")\n        elif request.operation == Operation.DIVIDE:\n            if request.num2 != 0:\n                return CalculatorResponse(request.num1 / request.num2, \"Result of division\")\n            else:\n                return CalculatorResponse(0, \"Cannot divide by zero\")\n        else:\n            return CalculatorResponse(0, \"Invalid operation\")\n\nclass CalculatorAPI:\n    def __init__(self, service: CalculatorService):\n        self.service = service\n\n    def calculate(self, request: CalculatorRequest) -> CalculatorResponse:\n        return self.service.calculate(request)\n\nclass Calculator:\n    def __init__(self):\n        self.history = []\n\n    def add(self, num1, num2):\n        \"\"\"Add two numbers\"\"\"\n        result = num1 + num2\n        self.history.append(f\"Added {num1} and {num2}, result = {result}\")\n        return result\n\n    def subtract(self, num1, num2):\n        \"\"\"Subtract two numbers\"\"\"\n        result = num1 - num2\n        self.history.append(f\"Subtracted {num2} from {num1}, result = {result}\")\n        return result\n\n    def multiply(self, num1, num2):\n        \"\"\"Multiply two numbers\"\"\"\n        result = num1 * num2\n        self.history.append(f\"Multiplied {num1} and {num2}, result = {result}\")\n        return result\n\n    def divide(self, num1, num2):\n        \"\"\"Divide two numbers\"\"\"\n        if num2 == 0:\n            raise ValueError(\"Cannot divide by zero\")\n        result = num1 / num2\n        self.history.append(f\"Divided {num1} by {num2}, result = {result}\")\n        return result\n\n    def get_history(self):\n        \"\"\"Get the calculation history\"\"\"\n        return self.history\n\n# === file: main.py ===\n\nfrom fastapi import FastAPI\nfrom pydantic import BaseModel\nfrom calculator import CalculatorAPI, CalculatorRequest, CalculatorResponse\nfrom calculator import CalculatorService\n\napp = FastAPI()\n\nclass CalculatorRequestModel(BaseModel):\n    operation: str\n    num1: float\n    num2: float\n\n@app.post(\"/calculate\")\nasync def calculate(request: CalculatorRequestModel):\n    operation_map = {\n        \"add\": CalculatorRequest.Operation.ADD,\n        \"subtract\": CalculatorRequest.Operation.SUBTRACT,\n        \"multiply\": CalculatorRequest.Operation.MULTIPLY,\n        \"divide\": CalculatorRequest.Operation.DIVIDE\n    }\n    request = CalculatorRequest(\n        operation=operation_map[request.operation],\n        num1=request.num1,\n        num2=request.num2\n    )\n    calculator = CalculatorAPI(CalculatorService())\n    response = calculator.calculate(request)\n    return response.dict()\n\n# === file: requirements.txt ===\n\nfastapi\npydantic\n\n# === file: .env ===\n\nSECRET_KEY=my_secret_key\n\n# === file: __init__.py ===\n\n# This file is empty, but it's required for Python packages\n\n# === file: main.py (updated) ===\n\nfrom fastapi import FastAPI\nfrom pydantic import BaseModel\nfrom calculator import CalculatorAPI, CalculatorRequest, CalculatorResponse\nfrom calculator import CalculatorService\nimport uvicorn\n\napp = FastAPI()\n\nclass CalculatorRequestModel(BaseModel):\n    operation: str\n    num1: float\n    num2: float\n\n@app.post(\"/calculate\")\nasync def calculate(request: CalculatorRequestModel):\n    operation_map = {\n        \"add\": CalculatorRequest.Operation.ADD,\n        \"subtract\": CalculatorRequest.Operation.SUBTRACT,\n        \"multiply\": CalculatorRequest.Operation.MULTIPLY,\n        \"divide\": CalculatorRequest.Operation.DIVIDE\n    }\n    request = CalculatorRequest(\n        operation=operation_map[request.operation],\n        num1=request.num1,\n        num2=request.num2\n    )\n    calculator = CalculatorAPI(CalculatorService())\n    response = calculator.calculate(request)\n    return response.dict()\n\nif __name__ == '__main__':\n    uvicorn.run(app, host='0.0.0.0', port=8000)\n",
  "backend/database.py": "import sqlite3\n\nclass Database:\n    def __init__(self, db_name):\n        self.conn = sqlite3.connect(db_name)\n        self.cursor = self.conn.cursor()\n\n    def create_user(self, username, password):\n        self.cursor.execute(\"INSERT INTO Users (username, password) VALUES (?, ?)\", (username, password))\n        self.conn.commit()\n\n    def calculate(self, user_id, calculation):\n        self.cursor.execute(\"INSERT INTO Calculations (user_id, calculation) VALUES (?, ?)\", (user_id, calculation))\n        self.conn.commit()\n        return self.cursor.lastrowid\n\n    def get_history(self, calculation_id):\n        self.cursor.execute(\"SELECT * FROM History WHERE calculation_id = ?\", (calculation_id,))\n        return self.cursor.fetchall()\n\n    def add_to_favorites(self, user_id, calculation_id):\n        self.cursor.execute(\"INSERT INTO Favorites (user_id, calculation_id) VALUES (?, ?)\", (user_id, calculation_id))\n        self.conn.commit()\n\n    def close(self):\n        self.conn.close()\n\nclass CalculatorDB:\n    def __init__(self, db_name):\n        self.db = Database(db_name)\n\n    def create_user(self, username, password):\n        self.db.create_user(username, password)\n\n    def calculate(self, user_id, calculation):\n        return self.db.calculate(user_id, calculation)\n\n    def get_history(self, calculation_id):\n        return self.db.get_history(calculation_id)\n\n    def add_to_favorites(self, user_id, calculation_id):\n        self.db.add_to_favorites(user_id, calculation_id)\n\n    def close(self):\n        self.db.close()\n\n# === file: main.py ===\n\nfrom calculator import CalculatorDB\n\ndef main():\n    db = CalculatorDB(\"calculator.db\")\n\n    # Create a user\n    db.create_user(\"john\", \"password123\")\n\n    # Calculate a value\n    calculation_id = db.calculate(1, \"2+2\")\n\n    # Get the history of a calculation\n    history = db.get_history(calculation_id)\n\n    # Add a calculation to favorites\n    db.add_to_favorites(1, calculation_id)\n\n    # Close the database\n    db.close()\n\nif __name__ == '__main__':\n    main()\n",
  "backend/calculator.db": "Scientific Calculator Database\n\n# Table: Users\nCREATE TABLE Users (\n  id INTEGER PRIMARY KEY,\n  username VARCHAR(255) NOT NULL,\n  password VARCHAR(255) NOT NULL\n);\n\n# Table: Calculations\nCREATE TABLE Calculations (\n  id INTEGER PRIMARY KEY,\n  user_id INTEGER NOT NULL,\n  calculation TEXT NOT NULL,\n  result TEXT,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  FOREIGN KEY (user_id) REFERENCES Users(id)\n);\n\n# Table: History\nCREATE TABLE History (\n  id INTEGER PRIMARY KEY,\n  calculation_id INTEGER NOT NULL,\n  history TEXT NOT NULL,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  FOREIGN KEY (calculation_id) REFERENCES Calculations(id)\n);\n\n# Table: Favorites\nCREATE TABLE Favorites (\n  id INTEGER PRIMARY KEY,\n  user_id INTEGER NOT NULL,\n  calculation_id INTEGER NOT NULL,\n  FOREIGN KEY (user_id) REFERENCES Users(id),\n  FOREIGN KEY (calculation_id) REFERENCES Calculations(id)\n);\n\n# === end ===\n\n# === file: calculator.py ===\n# Scientific Calculator App\n\nimport sqlite3\n\nclass Calculator:\n  def __init__(self, db_name):\n    self.conn = sqlite3.connect(db_name)\n    self.cursor = self.conn.cursor()\n\n  def create_user(self, username, password):\n    self.cursor.execute(\"INSERT INTO Users (username, password) VALUES (?, ?)\", (username, password))\n    self.conn.commit()\n\n  def calculate(self, user_id, calculation):\n    self.cursor.execute(\"INSERT INTO Calculations (user_id, calculation) VALUES (?, ?)\", (user_id, calculation))\n    self.conn.commit()\n    return self.cursor.lastrowid\n\n  def get_history(self, calculation_id):\n    self.cursor.execute(\"SELECT * FROM History WHERE calculation_id = ?\", (calculation_id,))\n    return self.cursor.fetchall()\n\n  def add_to_favorites(self, user_id, calculation_id):\n    self.cursor.execute(\"INSERT INTO Favorites (user_id, calculation_id) VALUES (?, ?)\", (user_id, calculation_id))\n    self.conn.commit()\n\n  def close(self):\n    self.conn.close()\n\n# Example usage:\nclass Database:\n  def __init__(self, db_name):\n    self.conn = sqlite3.connect(db_name)\n    self.cursor = self.conn.cursor()\n\n  def create_user(self, username, password):\n    self.cursor.execute(\"INSERT INTO Users (username, password) VALUES (?, ?)\", (username, password))\n    self.conn.commit()\n\n  def calculate(self, user_id, calculation):\n    self.cursor.execute(\"INSERT INTO Calculations (user_id, calculation) VALUES (?, ?)\", (user_id, calculation))\n    self.conn.commit()\n    return self.cursor.lastrowid\n\n  def get_history(self, calculation_id):\n    self.cursor.execute(\"SELECT * FROM History WHERE calculation_id = ?\", (calculation_id,))\n    return self.cursor.fetchall()\n\n  def add_to_favorites(self, user_id, calculation_id):\n    self.cursor.execute(\"INSERT INTO Favorites (user_id, calculation_id) VALUES (?, ?)\", (user_id, calculation_id))\n    self.conn.commit()\n\n  def close(self):\n    self.conn.close()\n\nclass CalculatorDB:\n  def __init__(self, db_name):\n    self.db = Database(db_name)\n\n  def create_user(self, username, password):\n    self.db.create_user(username, password)\n\n  def calculate(self, user_id, calculation):\n    return self.db.calculate(user_id, calculation)\n\n  def get_history(self, calculation_id):\n    return self.db.get_history(calculation_id)\n\n  def add_to_favorites(self, user_id, calculation_id):\n    self.db.add_to_favorites(user_id, calculation_id)\n\n  def close(self):\n    self.db.close()\n\n# === file: main.py ===\n# Scientific Calculator App\n\nfrom calculator import CalculatorDB\n\ndef main():\n  db = CalculatorDB(\"calculator.db\")\n\n  # Create a user\n  db.create_user(\"john\", \"password123\")\n\n  # Calculate a value\n  calculation_id = db.calculate(1, \"2+2\")\n\n  # Get the history of a calculation\n  history = db.get_history(calculation_id)\n\n  # Add a calculation to favorites\n  db.add_to_favorites(1, calculation_id)\n\n  # Close the database\n  db.close()\n\nif __name__ == '__main__':\n  main()\n"
}